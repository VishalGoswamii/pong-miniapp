<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover" />
<title>Pong ‚Ä¢ Classic</title>

<!-- Farcaster Mini App -->
<meta name="fc:miniapp" content='{
  "version": "1",
  "imageUrl": "https://pong-miniapp.vercel.app/og.png",
  "button": {
    "title": "Play Pong",
    "action": {
      "type": "launch_frame",
      "name": "Pong",
      "url": "https://pong-miniapp.vercel.app/",
      "splashImageUrl": "https://pong-miniapp.vercel.app/icon-200.png",
      "splashBackgroundColor": "#0b0f1a"
    }
  }
}' />

<!-- Optional: PeerJS for Online (lazy-loaded if needed) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.5.5/peerjs.min.js" defer></script>

<style>
:root{
  /* Court (game) */
  --courtOuter:#061429; --courtMain:#1E40AF; --courtKitchen:#ef4444; --courtLine:#F8FAFC;
  --centerRed:#ef4444; --ballY:#FDE047; --paddleFace:#D4DEE9; --paddleEdge:#425C7A;

  /* Home / result */
  --bg-deep:#0b0f1a; --bg-grad1:#0e1324; --bg-grad2:#0b1020;
  --card-bg:#0f1324cc; --card-bd:rgba(255,255,255,.12);
  --text-hi:#e9f1ff; --text-lo:#a8b3cc;
  --btn-border:rgba(255,255,255,.18);
  --btn-grad-top:#121b34; --btn-grad-bot:#0b1328;
  --btn-pr-top:#1a9cff; --btn-pr-bot:#1869ff;
}

*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg-deep);color:var(--text-hi);
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}

/* Pages */
.page{display:none;min-height:100dvh}
.page.active{display:block}

/* ===== HOME ===== */
#page-home{
  position:relative; display:flex; align-items:center; justify-content:center; padding:20px;
  background:
    radial-gradient(1200px 800px at 50% -20%, var(--bg-grad1) 0%, var(--bg-grad2) 65%),
    linear-gradient(180deg, var(--bg-deep), var(--bg-deep));
  overflow:hidden;
}
.home-wrap{ width:100%; max-width:720px; padding:0 6px }
.card{
  background:var(--card-bg);
  border:1px solid var(--card-bd);
  border-radius:18px;
  box-shadow:0 14px 40px rgba(0,0,0,.4), inset 0 0 0 1px rgba(255,255,255,.06);
  padding:18px 16px 16px;
}
.pixel-banner{ display:flex; flex-direction:column; align-items:center; gap:10px; padding:8px 8px 14px }
.pixel-badge{ padding:10px 16px; border-radius:12px; background:#0f162c; border:1px solid rgba(255,255,255,.14); }
.pixel-logo{ font-weight:1000; letter-spacing:2px; font-size:26px; color:#e7f3ff; }
.subtitle{ margin-top:2px; font-size:12px; color:var(--text-lo); text-align:center }
.profile{ margin-top:2px; display:flex; align-items:center; justify-content:center; gap:10px }
.profile img{ width:36px; height:36px; border-radius:999px; object-fit:cover; background:#0f172a; border:1px solid rgba(255,255,255,.18) }
.name{ font-weight:900; font-size:14px }
.best{ margin-top:4px; text-align:center; font-size:12px; color:var(--text-lo) }
.actions{ display:grid; grid-template-columns:1fr; gap:12px; margin:16px 0 4px }
.btn{
  appearance:none; border-radius:14px; padding:14px 16px; font-weight:1000; font-size:16px; cursor:pointer;
  border:1px solid var(--btn-border); color:var(--text-hi);
  background:linear-gradient(180deg, var(--btn-grad-top), var(--btn-grad-bot));
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.06);
  transition:transform .06s ease, filter .12s ease;
}
.btn:hover{ filter:brightness(1.05) }
.btn:active{ transform:translateY(1px) scale(.997) }
.btn-primary{
  background:linear-gradient(180deg, var(--btn-pr-top), var(--btn-pr-bot));
  color:#06111d; text-shadow:0 1px 0 rgba(255,255,255,.35);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.18);
}
.hint{ margin-top:6px; text-align:center; color:var(--text-lo); font-size:12px }

/* ===== GAME (stripped UI for perf) ===== */
#page-game{position:fixed; inset:0; background:var(--courtOuter)}
#wrap{position:absolute; inset:0; z-index:0}
canvas{display:block; width:100%; height:100%; touch-action:none; image-rendering:pixelated}
#hud{position:absolute; inset:0; pointer-events:none}
#score{
  position:absolute; top:calc(env(safe-area-inset-top) + 8px); left:50%; transform:translateX(-50%);
  color:#fff; font-weight:1000; letter-spacing:1px; font-size:22px; padding:4px 8px; border-radius:10px;
  background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.16);
}
#players{position:absolute; top:calc(env(safe-area-inset-top) + 44px); left:0; right:0; display:flex; justify-content:space-between; padding:0 8px}
.pb{display:flex; align-items:center; gap:8px; background:rgba(12,18,32,.45); border:1px solid rgba(255,255,255,.14);
  color:#eaf3ff; padding:4px 8px; border-radius:999px; min-width:112px}
.pb img{width:22px;height:22px;border-radius:999px;object-fit:cover;background:#0f172a}
.pb .name{font-weight:800;font-size:12px}
.pb .tag{font-size:11px;opacity:.8}
#hint{position:absolute; bottom:calc(env(safe-area-inset-bottom) + 8px); left:0; right:0; text-align:center; color:#e7f2ff; font-size:12px; opacity:.9}

/* In-game share bar (lightweight) */
#shareBar{
  position:absolute; top:calc(env(safe-area-inset-top) + 8px); right:8px; display:flex; gap:6px;
  pointer-events:auto;
}
.chip{
  appearance:none; border:1px solid rgba(255,255,255,.2); background:rgba(255,255,255,.1);
  color:#fff; font-size:12px; font-weight:800; border-radius:10px; padding:6px 10px; cursor:pointer;
}
.chip:active{ transform:translateY(1px) }

/* ===== RESULT / LEADERBOARD ===== */
#page-result, #page-leaderboard{
  display:flex; align-items:center; justify-content:center; padding:24px;
  background: radial-gradient(1200px 800px at 50% -20%, var(--bg-grad1) 0%, var(--bg-grad2) 65%);
}
.card2{
  background:var(--card-bg); border:1px solid var(--card-bd); color:var(--text-hi);
  border-radius:18px; padding:22px; box-shadow:0 18px 60px rgba(0,0,0,.45); width:100%; max-width:680px;
}
.title{font-size:28px;font-weight:1000}
.sub{margin-top:4px;opacity:.85;font-size:14px}
.actions2{display:flex; gap:10px; justify-content:center; margin-top:12px}
.btn.ghost{background:transparent}
.lb{margin-top:10px;text-align:left;max-height:52vh;overflow:auto}
.lb .entry{display:flex;align-items:center;gap:10px;padding:10px;border-radius:12px;background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.12);margin-bottom:8px}
.lb .entry img{width:28px;height:28px;border-radius:999px;object-fit:cover;background:#0f172a}
.lb .name{font-weight:800}
.lb .pts{margin-left:auto;font-weight:900}

/* Toast */
#toast{position:fixed; top:calc(env(safe-area-inset-top) + 10px); right:10px; z-index:10;
  color:#fff; background:rgba(0,0,0,.6); padding:8px 10px; border-radius:10px; font-size:12px; display:none}
#toast.show{display:block}
</style>
</head>
<body>

<!-- ===== HOME ===== -->
<section id="page-home" class="page active" role="main">
  <div class="home-wrap">
    <div class="card">
      <div class="pixel-banner">
        <div class="pixel-badge"><div class="pixel-logo">PONG</div></div>
        <div class="subtitle">Classic ‚Ä¢ Farcaster Edition</div>
      </div>

      <div class="profile">
        <img id="pfp" alt="">
        <div class="name" id="uname">Guest</div>
      </div>
      <div class="best" id="bestHome">Best: 0 pts</div>

      <div class="actions">
        <button id="btnSingle" class="btn btn-primary">‚ñ∂ Play Single Player</button>
        <button id="btnFind" class="btn">üïπÔ∏è Find Match</button>
        <button id="btnLB" class="btn">üèÜ Leaderboard</button>
      </div>

      <div class="hint">Swipe to move ‚Ä¢ <b>First to 7 wins</b> ‚Ä¢ Points shown only if you win</div>
    </div>
  </div>
</section>

<!-- ===== GAME ===== -->
<section id="page-game" class="page" aria-label="Game">
  <div id="wrap"><canvas id="game" aria-label="Pong"></canvas></div>
  <div id="hud">
    <div id="score" aria-live="polite">0 : 0</div>
    <div id="players">
      <div class="pb"><img id="p1img" alt=""><div><div class="name" id="p1name">You</div><div class="tag">P1</div></div></div>
      <div class="pb"><img id="p2img" alt=""><div><div class="name" id="p2name">CPU</div><div class="tag" id="p2tag">AI</div></div></div>
    </div>
    <div id="shareBar">
      <button id="btnCastScore" class="chip">Cast</button>
      <button id="btnShareScore" class="chip">Share</button>
    </div>
    <div id="hint">Round starts after 3-2-1.</div>
  </div>
</section>

<!-- ===== RESULT ===== -->
<section id="page-result" class="page">
  <div class="card2">
    <h1 class="title" id="resTitle">You win!</h1>
    <p class="sub">Points: <b id="resPts">0</b></p>
    <div class="actions2">
      <button class="btn btn-primary" id="btnAgain">Play Again</button>
      <button class="btn ghost" id="btnHome">Home</button>
      <button class="btn" id="btnCast">üêü Cast on Farcaster</button>
      <button class="btn ghost" id="btnShare">Share / Copy</button>
    </div>
  </div>
</section>

<!--
